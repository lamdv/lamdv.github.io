<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><link rel="canonical" href="https://lamdv.github.io/Scientific Journey/day-one-ish/"><meta name="lang:clipboard.copy" content="Copy to clipboard"><meta name="lang:clipboard.copied" content="Copied to clipboard"><meta name="lang:search.language" content="en"><meta name="lang:search.pipeline.stopwords" content="True"><meta name="lang:search.pipeline.trimmer" content="True"><meta name="lang:search.result.none" content="No matching documents"><meta name="lang:search.result.one" content="1 matching document"><meta name="lang:search.result.other" content="# matching documents"><meta name="lang:search.tokenizer" content="[\s\-]+"><link rel="shortcut icon" href="../../assets/images/favicon.png"><meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.3.1"><title>(Những) ngày đầu tiên - Liam</title><link rel="stylesheet" href="../../assets/stylesheets/application.4031d38b.css"><script src="../../assets/javascripts/modernizr.74668098.js"></script><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=swap"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel="stylesheet" href="../../assets/fonts/material-icons.css"></head><body dir="ltr"><svg class="md-svg"><defs><svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg></defs></svg> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" data-md-component="overlay" for="__drawer"></label><a href="#nhung-ngay-au-tien" tabindex="1" class="md-skip">Skip to content </a><header class="md-header" data-md-component="header"><nav class="md-header-nav md-grid"><div class="md-flex"><div class="md-flex__cell md-flex__cell--shrink"><a href="https://lamdv.github.io/" title="Liam" class="md-header-nav__button md-logo"><i class="md-icon"></i></a></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label></div><div class="md-flex__cell md-flex__cell--stretch"><div class="md-flex__ellipsis md-header-nav__title" data-md-component="title"><span class="md-header-nav__topic">Liam</span><span class="md-header-nav__topic">(Những) ngày đầu tiên</span></div></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--search md-header-nav__button" for="__search"></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active"> <label class="md-icon md-search__icon" for="__search"></label> <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button></form><div class="md-search__output"><div class="md-search__scrollwrap" data-md-scrollfix><div class="md-search-result" data-md-component="result"><div class="md-search-result__meta">Type to start searching</div><ol class="md-search-result__list"></ol></div></div></div></div></div></div><div class="md-flex__cell md-flex__cell--shrink"><div class="md-header-nav__source"><a href="https://github.com/lamdv/lamdv.github.io/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">GitHub</div></a></div></div></div></nav></header><div class="md-container"><nav class="md-tabs md-tabs--active" data-md-component="tabs"><div class="md-tabs__inner md-grid"><ul class="md-tabs__list"><li class="md-tabs__item"><a href="../.." title="Home" class="md-tabs__link">Home</a></li><li class="md-tabs__item"><a href="../intro/" title="Scientific Journey" class="md-tabs__link md-tabs__link--active">Scientific Journey</a></li><li class="md-tabs__item"><a href="../../Thought/the-death-of-expertise/" title="Thought" class="md-tabs__link">Thought</a></li></ul></div></nav><main class="md-main"><div class="md-main__inner md-grid" data-md-component="container"><div class="md-sidebar md-sidebar--primary" data-md-component="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0"><label class="md-nav__title md-nav__title--site" for="__drawer"><a href="https://lamdv.github.io/" title="Liam" class="md-nav__button md-logo"><i class="md-icon"></i></a>Liam</label><div class="md-nav__source"><a href="https://github.com/lamdv/lamdv.github.io/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">GitHub</div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../.." title="Home" class="md-nav__link">Home</a></li><li class="md-nav__item"><a href="../../CV/" title="Curriculum Vitae" class="md-nav__link">Curriculum Vitae</a></li><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked><label class="md-nav__link" for="nav-3">Scientific Journey</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-3">Scientific Journey</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../intro/" title="Hành trình khoa học: Python và R" class="md-nav__link">Hành trình khoa học: Python và R</a></li><li class="md-nav__item md-nav__item--active"><input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc"><label class="md-nav__link md-nav__link--active" for="__toc">(Những) ngày đầu tiên</label><a href="./" title="(Những) ngày đầu tiên" class="md-nav__link md-nav__link--active">(Những) ngày đầu tiên</a><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#phuong-phap-ban-au" title="Phương pháp ban đầu" class="md-nav__link">Phương pháp ban đầu</a></li><li class="md-nav__item"><a href="#ac-ta-co-so-du-lieu" title="Đặc tả cơ sở dữ liệu" class="md-nav__link">Đặc tả cơ sở dữ liệu</a></li><li class="md-nav__item"><a href="#cau-truc-toi-uu" title="Cấu trúc tối ưu" class="md-nav__link">Cấu trúc tối ưu</a></li></ul></nav></li><li class="md-nav__item"><a href="../day-two-documentation-markdown/" title="Ghi chú bằng Markdown" class="md-nav__link">Ghi chú bằng Markdown</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4"><label class="md-nav__link" for="nav-4">Thought</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-4">Thought</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../Thought/the-death-of-expertise/" title="The Death of Expertise" class="md-nav__link">The Death of Expertise</a></li><li class="md-nav__item"><a href="../../Thought/on-writing/" title="Về chuyện viết lách" class="md-nav__link">Về chuyện viết lách</a></li><li class="md-nav__item"><a href="../../taotac/a-survey-of-mounting.md" title="Tiêu chuẩn Tạo Tác" class="md-nav__link">Tiêu chuẩn Tạo Tác</a></li></ul></nav></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component="toc"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#phuong-phap-ban-au" title="Phương pháp ban đầu" class="md-nav__link">Phương pháp ban đầu</a></li><li class="md-nav__item"><a href="#ac-ta-co-so-du-lieu" title="Đặc tả cơ sở dữ liệu" class="md-nav__link">Đặc tả cơ sở dữ liệu</a></li><li class="md-nav__item"><a href="#cau-truc-toi-uu" title="Cấu trúc tối ưu" class="md-nav__link">Cấu trúc tối ưu</a></li></ul></nav></div></div></div><div class="md-content"><article class="md-content__inner md-typeset"><a href="https://github.com/lamdv/lamdv.github.io/edit/source/docs/Scientific Journey/day-one-ish.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a><h1 id="nhung-ngay-au-tien">(Những) ngày đầu tiên</h1>
<p><img alt="&quot;Icon Python&quot;" src="../../img/day-one-python-icon.png" /></p>
<p>Thật ra mình đã làm trong dự án này được đến nay chắc cũng gần 3 tuần rồi. Không thế nói là ngày đầu tiên được, những thì may ra.</p>
<p>Trong bước đầu của dự án đang làm, công việc chính của mình là phát triển một module/engine Python để thu thập dữ liệu từ một vài cơ sở dữ liệu. Việc này được thực hiện bằng một số thư viện cơ bản của Python. Các thư viện này bao gồm pandas (xử lý dữ liệu dạng bảng), bs4 (xử lý dữ liệu DOM), requests (thực thi truy vấn HTTPS) và json (xử lý dữ liệu dạng JSON và chuyển hóa dữ liệu dạng từ điển - Dictionary sang dạng JSON trả về)</p>
<h2 id="phuong-phap-ban-au">Phương pháp ban đầu</h2>
<p>Cách truyền thống để thực hiện các truy vấn này là viết các đoạn script để truy cập vào các trang web của các cơ sở dữ liệu nói trên và lấy kết quả trả về. Với phương pháp này, mỗi cơ sở dữ liệu mới sẽ có một đoạn script riêng để thực thi truy vấn và xử lý dữ liệu trả về. Phương pháp này khá đơn giản và hiệu quả với một số lượng nhỏ các cơ sở dữ liệu ít liên hệ với nhau. Code cũng sẽ minh bạch và tính bao đóng được đảm bảo.</p>
<p>Vấn đề với phương pháp này bắt đầu nảy sinh khi một số lượng lớn các cơ sở dữ liệu có quan hệ chồng chéo cần được xử lý. Sẽ không có cách nào hiệu quả để tìm hiểu mối quan hệ giữa các cơ sở dữ liệu này, DB nào truy vấn từ đâu những thông tin nào... Lượng code trùng lặp sẽ trở nên rất lớn khi đạt con số 10 - 12 cơ sở dữ liệu. Phần lớn khối lượng code sẽ là giống nhau: Thực hiện các truy vấn HTTPS, phân tách dữ liệu trả về, ghi dữ liệu vào các từ điển của Python và xuất chúng ra dưới dạng JSON. Người sử dụng các module này lại là các nhà sinh học với yêu cầu một giao diện dễ dàng giữa R và Python, trong khi hệ thống này không có cách nào sử dụng từ khóa như là 1 cách để truy cập các cơ sở dữ liệu.</p>
<p>Các vấn đề này đòi hỏi tái cấu trúc lại module Python sang một kiến trúc mới mạnh và tổng quan hơn.</p>
<h2 id="ac-ta-co-so-du-lieu">Đặc tả cơ sở dữ liệu</h2>
<p>Đối mặt với các cơ sở dữ liệu, một cách tự nhiên ta nghĩ đến việc gom các phần code trùng lặp giữa các sript truy vấn cơ sở dữ liệu với nhau thành một máy truy vấn (query engine) mạnh và tổng quan. Các thành phần liên quan đến truy vấn mạng, HTTPS được hỗ trợ bởi thư viện requests hoàn toàn là trùng nhau qua các thành phần, và đã được gom lại vào module helper - đây là cách đặt tên theo quy ước dành cho một module chứa các hàm phụ trợ, không sử dụng như một thành phần của các đối tượng. Việc cần làm là viết các exception thông báo lỗi từ phía server để người dùng có thể tiến hành sửa chữa lỗi. Các thành phần phân tách dữ liệu cần được tổ chức lại hoàn toàn để có thể:</p>
<ol>
<li>Phân giải dữ liệu chính xác giữa các cơ sở dữ liệu có cùng công nghệ trả về,</li>
<li>Chuyển đổi chế độ phân tách dữ liệu giữa các công nghệ khác nhau.</li>
</ol>
<p>Để phân biệt giữa các chế độ phân tách khác nhau đòi hỏi cần có một phương pháp để phân biệt giữa các cơ sở dữ liệu, phân tích và phân loại chúng vào các nhóm khác nhau. Điều này cũng có lợi cho các truy vấn HTTPS, vì chúng ta cần phải có các đường dẫn đến các cơ sở dữ liệu. Các truy vấn HTTPS cũng được phân loại thành 2 method: POST và GET, điều này cũng cần được ghi chú lại và chuyển đổi giữa 2 chế độ.</p>
<p>Bài toán đặt ra trước mắt đòi hỏi thiết kế một cơ sở dữ liệu phụ trợ, lưu trữ thông tin về tất cả các cơ sở dữ liệu có trong truy vấn. Đây là một dạng siêu dữ liệu (metadata). Từ khóa này có vẻ cao siêu, nhưng thực tế chúng khá đơn giản. Chúng chứa các đặc tả về cấu trúc, các thông tin cần thiết và liên quan đến cơ sở dữ liệu chúng ta đang cần truy vấn.</p>
<p>Mình không muốn công bố đặc tả này ra trong bài này, vì đã đủ nặng về kỹ thuật. Tuy vậy một điều cần đặc biệt với việc sử dụng các metadata này là nó cho phép ta mở rộng số lượng các cơ sở dữ liệu có thể truy vấn lên theo cấp số cộng. Mỗi cơ sở dữ liệu mới giờ chỉ cần viết các mô tả này để có thể truy cập theo tên và các thông số truy vấn phù hợp. Điều này thỏa mãn các yêu cầu về tính tổng quan của engine truy vấn dữ liệu đang được xây dựng. Đây cũng là lý do tại sao trong ngành học máy có những nội dung rất quan trọng về khai phá siêu dữ liệu.</p>
<h2 id="cau-truc-toi-uu">Cấu trúc tối ưu</h2>
<p>Công việc thiết kế đặc tả cơ sở dữ liệu phải được thực hiện song song với quá trình thiết kế kiến trúc máy truy vấn. Mỗi phần của cấu trúc đặc tả được viết ra khớp với giải thuật tương ứng của máy truy vấn.</p>
<p>Hiện tại cấu trúc máy truy vấn ổn định được thực hiện theo giải thuật sau:</p>
<ol>
<li>Nhận chuỗi tên cơ sở dữ liệu cần truy vấn</li>
<li>Truy xuất cơ sở dữ liệu tương ứng với DOM cung cấp bởi bs4</li>
<li>Truy vấn cơ sở dữ liệu thông qua đường dẫn lưu trữ trong đặc tả</li>
<li>Xác định loại dữ liệu trả về - được lưu lại trước trong đặc tả</li>
<li>Phân giải dữ liệu theo cấu hình đã lưu trữ sẵn</li>
<li>Dịch kết quả sang cấu trúc JSON để R có thể phân tích</li>
</ol>
<p>Kết thúc giai đoạn này của dự án, ta đã có thể truy cập các cơ sở dữ liệu với độ ổn định và đồng nhất cao cả về kết quả trả về lẫn hiệu năng truy xuất. Nền tảng này cũng dễ dàng được đưa vào áp dụng trong các bài toán khác ngoài ngành Tin sinh học.</p>
<p>Bài tiếp theo sẽ nói về R và các bài đầu tiên liên quan đến R. Giờ thì nghỉ thôi :wink:</p></article></div></div></main><footer class="md-footer"><div class="md-footer-nav"><nav class="md-footer-nav__inner md-grid"><a href="../intro/" title="Hành trình khoa học: Python và R" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev"><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-back md-footer-nav__button"></i></div><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">Previous</span>Hành trình khoa học: Python và R</span></div></a><a href="../day-two-documentation-markdown/" title="Ghi chú bằng Markdown" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next"><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">Next</span>Ghi chú bằng Markdown</span></div><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i></div></a></nav></div><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-footer-copyright">powered by <a href="https://www.mkdocs.org">MkDocs</a> and <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a></div></div></div></footer></div><script src="../../assets/javascripts/application.b260a35d.js"></script><script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script></body></html>